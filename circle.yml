machine:
  services:
    - docker
  environment:
    COVALENCE_VERSION: 0.1.3
    ATLAS_TOKEN: GryCCpG3GRBqQw.atlasv1.1ASD0jMKyVmLmUVlqP7ca6xdxqzY1nNroAVtTSKRBYR7fnLxciPCboidfwKR6bXBaWQ
    TERRAFORM_IMG: unifio/terraform:latest
    TERRAFORM_CMD: "docker run -e ATLAS_TOKEN=$ATLAS_TOKEN --rm"

test:
  pre:
    - docker pull unifio/terraform:latest
  override:
    - bundle exec rake ci:covalence
    - gem build covalence.gemspec

general:
  artifacts:
    - covalence-${COVALENCE_VERSION}.gem
